{"version":3,"sources":["webpack:///webpack/bootstrap 9030d9d0770d29296ab7","webpack:///./main.js","webpack:///./mapload.js","webpack:///./regionalCenter.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,gBAAgB,KAAK,aAAa;AAC3C;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV,4BAA2B,MAAM;AACjC;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAmC,iBAAiB;AACpD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,qCAAoC,WAAW;AAC/C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,sB;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,OAAM;AACN;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA,sC;;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8B","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9030d9d0770d29296ab7","'use strict';\r\nlet mapLoad= require('./mapload.js');\r\nlet RegionalCenter = require('./regionalCenter.js');\r\nlet routes = new Vue({\r\n\tel:'#routes',\r\n\tdata:{\r\n\t\tcities:[],\r\n\t\tdeparturePoint:\"\",\r\n\t\telIndexDrawn:-1\r\n\t},\r\n\tcomponents:{\r\n\t\t'route':{\r\n\t\t\tprops:['finishPoint','departurePoint'],\r\n\t\t\ttemplate:'\\\r\n\t\t\t\t<li>\\\r\n\t\t\t\t<a href=\"#\" v-on:click=\"$emit(\\'draw\\')\" >\\\r\n\t\t\t\tиз {{departurePoint}} в {{finishPoint}}\\\r\n\t\t\t\t</a>\\\r\n\t\t\t\t</li>',\r\n\t\t}\r\n\t},\r\n\tcomputed:{\r\n\t\tdeparturePChoosed:function(){\r\n\t\t\treturn (this.departurePoint.trim()==\"\")?false:true;\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\tdrawRoute:function(index){\r\n\t\t\tif(this.elIndexDrawn===-1){\r\n\t\t\t\tmapLoad.hideMarker();\r\n\t\t\t}\r\n\t\t\tthis.elIndexDrawn = index;\r\n\t\t\tlet destinationCity=this.cities[index];\r\n\t\t\tmapLoad.drawDirection(destinationCity.lat,destinationCity.lng);\r\n\t\t}\r\n\t},\r\n\tcreated:function(){\r\n\t\t  let self=this;\r\n\t\t  loadRegionalCenters().then(\r\n\t        response => {\r\n\t        \tfor(let city of response){\r\n\t    \t\t\tlet regCenter = new RegionalCenter(city.title,city.lat,city.lng);\r\n\t    \t\t\tself.cities.push(regCenter);\r\n\t    \t\t}\r\n\t        },\r\n\t        error => alert(`${error}`)\r\n\t\t  );\r\n\t\t  \r\n\t}\r\n});\r\n\r\nfunction loadRegionalCenters(){\r\n  return new Promise(function(resolve,reject){\r\n\t  const url = 'http://test.bitmark.com.ua/route';\r\n\t  const xhr = createCORSRequest('GET', url);\r\n\t  if (!xhr) {\r\n\t    reject(new Error('CORS не поддерживается'));\r\n\t  }\r\n\t  \r\n\t  // Response handlers.\r\n\t  xhr.onload = function() {\r\n\t\tif(this.status == 200){\r\n\t\t  let response = JSON.parse(this.responseText);\r\n\t\t  let cities = response.data.cities;\r\n\t\t  resolve(cities);\r\n\t\t}else{\r\n\t\t  var error = new Error(this.statusText);\r\n\t\t  error.code = this.status;\r\n\t\t  reject(error);\r\n\t\t}\r\n\t  };\r\n\t\r\n\t  xhr.onerror = function() {\r\n\t\t  reject(new Error('Произошла ошибка при выполнение запроса на получение региональных центров'));\r\n\t  };\r\n\t\r\n\t  xhr.send();\r\n  });\r\n}\r\nfunction createCORSRequest(method, url) {\r\n  let xhr = new XMLHttpRequest();\r\n  if (\"withCredentials\" in xhr) {\r\n    // XHR for Chrome/Firefox/Opera/Safari.\r\n    xhr.open(method, url, true);\r\n  } else if (typeof XDomainRequest != \"undefined\") {\r\n    // XDomainRequest for IE.\r\n    xhr = new XDomainRequest();\r\n    xhr.open(method, url);\r\n  } else {\r\n    // CORS not supported.\r\n    xhr = null;\r\n  }\r\n  return xhr;\r\n};\r\n\r\nglobal.routes=routes\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./main.js\n// module id = 0\n// module chunks = 0","'use strict';\r\nlet directionsService;\r\nlet directionsDisplay;\r\nlet marker;\r\nfunction initializeMap() {\r\n  directionsService = new google.maps.DirectionsService;\r\n  directionsDisplay = new google.maps.DirectionsRenderer;\r\n  let ukraine = new google.maps.LatLng(50.483396, 30.430394);\r\n  let mapCanvas = document.getElementById(\"map\");\r\n  let myCenter = ukraine;\r\n  let mapOptions = {\r\n    center: myCenter, \r\n    zoom: 5\r\n  }\r\n  let map = new google.maps.Map(mapCanvas, mapOptions);\r\n  directionsDisplay.setMap(map);\r\n\r\n  marker = new google.maps.Marker({position:ukraine});\r\n  marker.setMap(map);\r\n  marker.setVisible(false);\r\n  \r\n  let input = (document.getElementById(\"departure\"));\r\n  let autocomplete = new google.maps.places.Autocomplete(input);\r\n  autocomplete.bindTo('bounds',map);\r\n  \r\n  autocomplete.addListener('place_changed',function(){\r\n\t  marker.setVisible(false);\r\n\t  \r\n\t  directionsDisplay.setDirections({routes: []});\r\n\t  routes.elIndexDrawn=-1;\r\n\t  \r\n\t  let place = autocomplete.getPlace();\r\n      if (!place.geometry) {\r\n        window.alert(\"Пожалуйста, выберите пункт из списка\");\r\n        return;\r\n      }\r\n      \r\n      routes.departurePoint=input.value.split(\",\")[0];\r\n      // If the place has a geometry, then present it on a map.\r\n      if (place.geometry.viewport) {\r\n        map.fitBounds(place.geometry.viewport);\r\n      } else {\r\n        map.setCenter(place.geometry.location);\r\n      }\r\n      map.setZoom(6); \r\n      marker.setPosition(place.geometry.location);\r\n      marker.setVisible(true);\r\n  });\r\n}\r\nvar drawDirection = function(lat,lng){\r\n\t directionsService.route({\r\n\t    origin: marker.getPosition().lat()+\", \"+marker.getPosition().lng(),\r\n\t    destination: lat+\", \"+lng,\r\n\t    travelMode: google.maps.TravelMode.DRIVING\r\n\t  }, function(response, status) {\r\n\t    if (status === google.maps.DirectionsStatus.OK) {\r\n\t      directionsDisplay.setDirections(response);\r\n\t    } else {\r\n\t      if(status.localeCompare(\"ZERO_RESULTS\")==0){\r\n\t    \t  window.alert('Невозможно добраться машиной.');\r\n\t      }else{\r\n\t    \t  window.alert('Маршрут не удалось найти в связи с: ' + status);\r\n\t      }\r\n\t    }\r\n\t  });\r\n}\r\n\r\nvar hideMarker = () => marker.setVisible(false);\r\nmodule.exports.drawDirection=drawDirection;\r\nmodule.exports.hideMarker= hideMarker;\r\nglobal.initializeMap = initializeMap;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./mapload.js\n// module id = 1\n// module chunks = 0","class RegionalCenter{\r\n\tconstructor(title,lat,lng){\r\n\t\tthis.title=title;\r\n\t\tthis.lat=lat;\r\n\t\tthis.lng=lng;\r\n\t}\r\n};\r\n\r\nmodule.exports=RegionalCenter\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./regionalCenter.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}